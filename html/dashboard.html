<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DomoHome - Dashboard</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="../plugins/iosCheckbox/iosCheckbox.css">
  <link rel="stylesheet" href="../css/navbar.css">
  <link rel="stylesheet" href="../css/dashboard.css">
  <link href="../toastr-master/build/toastr.css" rel="stylesheet"/>
  <link rel="stylesheet" type="text/css" href="../plugins/slick/slick.css" />
  <link rel="stylesheet" type="text/css" href="../plugins/slick/slick-theme.css">
  <link rel="stylesheet" type="text/css" href="../plugins/NoUiSlider/nouislider.min.css">
</head>

<body>

  <!-- Navbar -->

  <div class="page">
    <nav class="page__menu menu">
      <ul class="menu__list r-list">
        <li class="menu__group"><a href="../html/dashboard.html" class="menu__link r-link text-underlined"><i
              class="fa fa-lightbulb-o"></i></a></li>
        <li class="menu__group"><a href="../html/Acceuil.html" class="menu__link r-link text-underlined"><i class="fas fa-home"></i></a>
        </li>
        <li class="menu__group"><a href="../html/mon_compte.html" class="menu__link r-link text-underlined"><i
              class="fas fa-user-circle"></i></a></li>
      </ul>
    </nav>

    <!-- End Navbar -->

    <!-- Dashboard -->

    <section class="vertical-center-4 slider dashboard" id="dashboard">
      <div class="card d-flex justify-content-center align-items-center">
        <i class="fab fa-itunes-note"></i>
        <a class="card-closer"><i class="fa fa-times"></i></a>
        <div class="checkbox-container">
          <input type="checkbox" class="ios" />
        </div>
      </div>
      <div class="card d-flex justify-content-center align-items-center">
        <i class="fas fa-tv"></i>
        <a class="card-closer"><i class="fa fa-times"></i></a>
        <div class="checkbox-container">
          <input type="checkbox" class="ios" checked />
        </div>
      </div>
      <div class="card d-flex justify-content-center align-items-center">
        <i class="fas fa-lightbulb"></i>
        <a class="card-closer"><i class="fa fa-times"></i></a>
        <div class="checkbox-container">
          <input type="checkbox" class="ios" />
        </div>
      </div>
      <div class="card d-flex justify-content-center align-items-center">
        <i class="fas fa-fire"></i>
        <a class="card-closer"><i class="fa fa-times"></i></a>
        <div class="checkbox-container">
          <input type="checkbox" class="ios" checked />
        </div>
      </div>
      </div>
    </section>

    <!-- Cursor -->

    <div id="cursors">
    </div>

        <!-- Footer -->

        <div class="mt-5 pt-5 pb-5 footer">
          <div class="container">
            <div class="row">
              <div class="col-lg-5 col-xs-12 about-company">
                <h2>DomoHome</h2>
                <p class="pr-5 text-white-50">Votre service de domotique</p>
                <p><a href="#"><i class="fa fa-facebook-square mr-1"></i></a><a href="#"><i
                      class="fa fa-linkedin-square"></i></a></p>
              </div>
              <div class="col-lg-3 col-xs-12 links">
                <h4 class="mt-lg-0 mt-sm-3">Liens</h4>
                <ul class="m-0 p-0">
                  <li>- <a href="#">Nous contacter</a></li>
                  <li>- <a href="#">CGU</a></li>
                  <li>- <a href="#">A propos</a></li>
                  <li>- <a href="#">FAQ</a></li>
                </ul>
              </div>
              <div class="col-lg-4 col-xs-12 location">
                <h4 class="mt-lg-0 mt-sm-4">Location</h4>
                <p>159-161, Boulevard de la Liberté, 59000 Lille</p>
                <p class="mb-0"><i class="fa fa-phone mr-3"></i>03 20 15 16 77</p>
                <p><i class="fa fa-envelope-o mr-3"></i>info@domohome.com</p>
              </div>
            </div>
            <div class="row mt-5">
              <div class="col copyright">
                <p class=""><small class="text-white-50">© 2021 All Rights Reserved.</small></p>
              </div>
            </div>
          </div>
        </div>
    
        <!-- End Footer-->

    <!-- Slick Script-->

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js">
    </script>

    <script type="text/javascript" src="http://code.jquery.com/jquery-migrate-1.2.1.min.js">
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>

    <script src="https://kit.fontawesome.com/4faa15e792.js" crossorigin="anonymous">
    </script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>

    <script type="text/javascript" src="../plugins/slick/slick.min.js">
    </script>

    <script type="text/javascript" src="../plugins/iosCheckbox/iosCheckbox.min.js">
    </script>

    <script type="text/javascript" src="../plugins/NoUiSlider/nouislider.min.js">
    </script>

        
    <script type="text/javascript" src="../toastr-master/toastr.js">
    </script>

    
    <script type="text/javascript" src="../jvscript/callajax.js">
    </script>

    <script type="text/javascript">
      $(".dashboard").on("click", ".card", function () {
        $(".dashboard .card").removeClass("active");
        $(this).addClass("active");
        let equipment = $(this).data("equipment");
        AfficherCursors(equipment);
      });

      AfficherEquipements();



      function AfficherCursors(equipment){
        let html = "";
        switch (equipment.name) {
          case "sound":
              html='<div class="cursor">\
                <div id="volume"></div>\
              </div>';
            break;
        
            case "TV":
              html='<div class="cursor" style="display: flex; flex-grow: 2;">\
                <div id="volume"></div>\
                <div class="play"><i class="fa fa-play" aria-hidden="true" style="font-size: 100px;"></i></div>\
              </div>'

            break;
        
            case "light":
             html='<div class="cursor">\
                <div id="colorpicker">\
                  <div class="sliders" id="red"></div>\
                  <div class="sliders" id="green"></div>\
                  <div class="sliders" id="blue"></div>\
                  <div id="result"></div>\
                </div>\
              </div>\
              <div class="cursor">\
                <div id="volume"></div>\
              </div>';
            break;
        
            case "heating":
            html='<div class="cursor">\
                <div id="volume"></div>\
              </div>';
            break;
        
            case "component":
              html='<div class="cursor">\
                <div id="volume"></div>\
              </div>';
            break;
        
          default:
            toastr.error("Je ne comprend pas ton equipment frere");
            return;
            break;
        }

        $("#cursors").html(html);

        if(equipment.intensite){
          EnableCursorsVolume(equipment.intensite);
        }
        if(equipment.color1 && equipment.color2 && equipment.color3){
          EnableCursorsLight(equipment.color1, equipment.color2, equipment.color3);
        }
      }




      function AfficherEquipements(){
        call("../php/equipment.php", {}, (equipments)=>{
          $("#dashboard").html("");
          equipments.forEach(equipment => {
            let html = '<div class="card d-flex justify-content-center align-items-center" data-id="' + equipment.id + '">\
              <p style="margin-bottom: 0;">' + equipment.name + '</p>\
              <i class="fab fa-itunes-note"></i>\
              <a class="card-closer"><i class="fa fa-times"></i></a>\
              <div class="checkbox-container">\
                <input type="checkbox" class="ios"' + ((equipment.isenable == 1) ? " checked" : "") + ' />\
              </div>\
            </div>';
            $("#dashboard").append(html);
            $("#dashboard").find('[data-id="' + equipment.id + '"]').data("equipment", equipment);
          });
          
          $("#dashboard").slick({
            infinite: true,
            slidesToShow: 3,
            slidesToScroll: 3,
            responsive: [
            {
              breakpoint: 600,
              settings: {
                slidesToShow: 1,
                slidesToScroll: 1,
                dots: true
              }
            }]
          });
          $("#dashboard").find(".ios").iosCheckbox();
          $("#dashboard").on("click",".ios-ui-select", function(){
            let isenable = $(this).hasClass("checked");
            call("../php/boolEquipment.php", {
              "isenable": isenable,
              "iddevice": $(this).parents(".card").attr("data-id")
            }, (reponse)=>{
              if(reponse === true){
                if(isenable) {
                  toastr.success("Votre équipement est désormais activé.", "Activé !");
                } else {
                  toastr.info("Votre équipement est désormais désactivé", "Désactivé !");
                }
              }else{
                toastr.error("Regarde dans la console débile.","Une erreur est survenue");
              }
            });
        });
      });
    }
    </script>

    <script type="text/javascript" src="../jvscript/sliders.js">
    </script>

</body>

</html>